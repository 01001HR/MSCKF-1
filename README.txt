²Î¿ŒÎÄÏ×1£ºThe Battle for Filter Supremacy: A Comparative Study of the Multi-State Constraint Kalman Filter and the Sliding Window Filter
²Î¿ŒÎÄÏ×2£ºVisual Inertial Odometry for Mobile Robotics

********************³ÌÐòÖÐÖ÷Òª±äÁ¿ËµÃ÷************************
²ÎÊýËµÃ÷£º
numLandmarks              Ã¿Ö¡ÌØÕ÷µãžöÊý
camera.c_u                ¹âÐÄºá×ø±ê[u pixels]
camera.c_v                ¹âÐÄÁÐ×ø±ê [v pixels]
camera.f_u                œ¹Ÿà [u pixels]
camera.f_v                œ¹Ÿà [v pixels]
camera.b                  Ë«Ä¿»ùÏßŸà [m]
camera.q_CI               4x1 IMUµœCameraÐý×ªËÄÔªÊý
camera.p_C_I              3x1 IMU×ø±êÏµÏÂµÄCameraÎ»ÖÃ

msckfParams.minTrackLength        ÌØÕ÷µã×îÉÙÏà»ú¹Û²âÊýÄ¿
msckfParams.maxTrackLength        ÌØÕ÷µã×îŽóÏà»ú¹Û²âÊýÄ¿
msckfParams.maxGNCostNorm         žßË¹Å£¶ÙÓÅ»¯ÇóœâÈýœÇ»¯ÌØÕ÷µãµÄµüŽúÎó²îÉÏÏÞ
msckfParams.minRCOND              ŸØÕóÌõŒþÊý
msckfParams.doNullSpaceTrick      ÊÇ·ñ×öÁã¿ÕŒäÓ³Éä
msckfParams.doQRdecomp            ÊÇ·ñ×öQR·Öœâ

IMU×ŽÌ¬£º
imuStates{k}.q_IG         4x1 Global µœ IMU ×ËÌ¬ËÄÔªÊý
imuStates{k}.p_I_G        3x1 IMU ÔÚGlobal×ø±êÏµÏÂÎ»ÖÃ
imuStates{k}.b_g          3x1 ÍÓÂÝÒÇÁãÆ«
imuStates{k}.b_v          3x1 ËÙ¶ÈÁãÆ«
imuStates{k}.covar        12x12 IMU ×ŽÌ¬Ð­·œ²î

Ïà»ú×ŽÌ¬£º
camStates{k}.q_CG        4x1 Global µœ camera µÄ×ËÌ¬ËÄÔªÊý
camStates{k}.p_C_G       3x1 Global×ø±êÏµÏÂµÄcameraÎ»ÖÃ
camStates{k}.trackedFeatureIds  1xMµ±Ç°Ïà»ú¿É¹Û²âµœµÄÌØÕ÷µÄID
camStates{k}.state_k     µ±Ç°Ïà»úID

MSCKF×ŽÌ¬£º
msckfState.imuState     IMU×ŽÌ¬
msckfState.imuCovar     IMU-IMUÐ­·œ²îŸØÕó¿é
msckfState.camCovar     camera-cameraÐ­·œ²îŸØÕó¿é
msckfState.imuCamCovar  IMU-cameraÐ­·œ²î
msckfState.camStates    Ïà»ú×ŽÌ¬

ÌØÕ÷žú×ÙÁÐ±í£º
featureTracks        ÕýÔÚ×·×ÙµÄÌØÕ÷µã£šÌØÕ÷µã×ø±ê£¬ÄÜ¹Û²âµœÕâÐ©ÌØÕ÷µãµÄÏà»ú£¬ÌØÕ÷µãID£©
trackedFeatureIds    ÕýÔÚ×·×ÙÌØÕ÷µãµÄIDºÅ         

********************³ÌÐò²œÖè***********************************      
²œÖè1£ºŒÓÔØÊýŸÝ
²œÖè2£º³õÊŒ»¯MSCKFÖÐimu²âÁ¿Ð­·œ²îÓëÔ€²âÐ­·œ²î
²œÖè3£ºµŒÈë²âÁ¿ÊýŸÝÓë²Î¿ŒÊýŸÝ
²œÖè4£º³õÊŒ»¯MSCKF
      a.œ«µÚÒ»žö²Î¿ŒÖµµÄËÄÔªÊýÓëÎ»ÖÃ³õÊŒ»¯msckfÖÐIMUµÄ×ŽÌ¬
      b.Ä¿Ç°MSCKF×ŽÌ¬ÖÐÖ»ÓÐIMUÏà¹ØµÄ×ŽÌ¬£¬Ã»ÓÐcameraÏà¹ØµÄ×ŽÌ¬
      c.msckfÖÐ²»œ«ÌØÕ÷µã×÷Îª×ŽÌ¬£¬µ«Ò²»áŒÇÂŒžú×ÙµÄÌØÕ÷µã¡£³õÊŒ»¯Ê±ÈÏÎªµÚÒ»Ö¡ËùÓÐÌØÕ÷µã¶Œ±»žú×ÙÉÏ¡£
²œÖè5£º×ŽÌ¬ÓëÐ­·œ²îÔ€²âžüÐÂ¡£ŽÓ²œÖè5µœ²œÖè10Ñ­»·œøÐÐ¡£
      a.×ŽÌ¬Ô€²âžüÐÂ¡£
           a1.IMU×ŽÌ¬žüÐÂ£šœÇËÙ¶ÈžüÐÂËÄÔªÊý£¬ËÙ¶È»ý·ÖžüÐÂÎ»ÖÃ£¬ÍÓÂÝÒÇÁãÆ«ºÍËÙ¶ÈÁãÆ«²»±ä£©
           a2.camera×ŽÌ¬žüÐÂ£š±£³ÖºÍÉÏÒ»ŽÎÏàÍ¬£©
      b.Ð­·œ²îÔ€²âžüÐÂ
           b1.IMU-IMU×ŽÌ¬µÄÐ­·œ²îžüÐÂ£¬²¢¶ÔœÇ»¯¡££šimuCover := P * imuCover * P' + G * Q_imu * G'£©
           b2.IMU-camera×ŽÌ¬µÄÐ­·œ²îžüÐÂ¡££šimuCamCovar := P * imuCamCovar£©
           b3.camera-camera×ŽÌ¬µÄÐ­·œ²îžüÐÂ¡££šcamCovar:=camCovar£©
²œÖè6£º×ŽÌ¬Ôö¹ã£¬ÔÚmsckf×ŽÌ¬ÖÐÔö¹ãÏà»ú×ŽÌ¬
      a.ÓÉIMUÒÔŒ°IMUÓëcameraµÄ¹ÌÁ¬¹ØÏµµÃµœÏà»úµÄÎ»ÖÃºÍ×ËÌ¬
      b.Ôö¹ãÑÅ¿Ë±È¡£Ôö¹ã×ŽÌ¬ÒÔºó£¬ÐèÒªµÃµœÔö¹ã×ŽÌ¬£šÏà»úÎ»ÖÃ¡¢Ïà»úËÄÔªÊý£©¶Ômsckf×ŽÌ¬£šÔö¹ãÇ°ÒÔºóµÄ×ŽÌ¬£©µÄÑÅ¿Ë±È
      c.Ôö¹ãÔ€²âÐ­·œ²îŸØÕó£¬žüÐÂÔö¹ãºóµÄÐ­·œ²îŸØÕó
²œÖè7£º±éÀúµ±Ç°Ö¡ËùÓÐÌØÕ÷µã£¬žüÐÂfeatureTracks
      ËµÃ÷£ºmsckfÖÐÓÃfeatureTracksŒÇÂŒÁËÄ¿Ç°±»žú×ÙµœµÄÌØÕ÷µã¡£
           featureTracksÖÐ°üº¬Ã¿žöÌØÕ÷µãIDºÍ¹Û²âÖµ£šŒŽÔÚËùÓÐÄÜ¹Û²âµœžÃÌØÕ÷µãµÄÏà»ú×ø±êÏµÏÂµÄÆëŽÎ×ø±ê£©
      a.±éÀúµ±Ç°Ö¡ËùÓÐÌØÕ÷µã£¬ÅÐ¶ÏÊÇ·ñÊôÓÚfeatureTracks
      b.Èç¹ûžÃÌØÕ÷µãÔÚÊÓÒ°·¶Î§ÄÚ£ºœ«ÌØÕ÷µãÔÚÏà»ú×ø±êÏµÏÂµÄÆëŽÎ×ø±êÌíŒÓµœfeatureTracksÖÐ¶ÔÓŠÌØÕ÷µÄ¹Û²âÖÐ¡£
      c.Èç¹ûžÃÌØÕ÷µã³¬³öÊÓÒ°·¶Î§»òÕßÄÜ¹»¹Û²âµœžÃÌØÕ÷µÄÏà»úÊýÄ¿ŽóÓÚÉÏÏÞÖµ
            c1.ŽÓËùÓÐÏà»ú×ŽÌ¬ÖÐÌÞ³ýžÃÌØÕ÷µã£¬²¢œ«ÉæŒ°µœµÄÏà»ú×ŽÌ¬ÌíŒÓµœ×ŽÌ¬ŽýÓÅ»¯ÁÐ±íÖÐ
            c2.Èç¹ûŽýÓÅ»¯µÄÏà»ú×ŽÌ¬³¬¹ý×îÐ¡žú×Ù³€¶È£š10£©£¬Ôòœ«ÆäÌíŒÓµœÁÐ±íÖÐÓÃÓÚÓÅ»¯
            c3.ÈôÒÑÊ¹ÓÃÍêžøÌØÕ÷£¬ÔòŽÓfeatureTracksÖÐÌÞ³ýžÃÌØÕ÷µã
      d.Èç¹ûžÃÖ¡Œì²âµÄÌØÕ÷µãÊÓÒ°·¶Î§ÄÚ£šµ«ÊÇ²»ÊôÓÚfeatureTracks£©£¬Ôòœ«ÆäÌíŒÓÖÁfeatureTracksÖÐ
²œÖè8£ºMSCKF²âÁ¿žüÐÂ¡£±éÀúËùÓÐÓÃÓÚÓÅ»¯µÄÌØÕ÷µã,¹¹Ôì¹Û²âÄ£ÐÍ£šÌØÕ÷µãÖØÍ¶Ó°Îó²î£©£¬žüÐÂMSCKF×ŽÌ¬
      a.Íš¹ýÌØÕ÷µãËùÓÐ¹Û²â¹ÀŒÆ³öžÃÌØÕ÷µãµÄ3D¿ÕŒä×ø±êÎ»ÖÃ
      b.Íš¹ýÌØÕ÷3D×ø±êÓëÏà»úÆ¥ÅäÌØÕ÷µãÖ®ŒäµÄÖØÍ¶Ó°²Ð²î¹¹Ôì¹Û²âÄ£ÐÍ£¬°üÀšÖØÍ¶Ó°Îó²î¶ÔMSCKF×ŽÌ¬Á¿µÄÑÅ¿Ë±ÈŸØÕóµÄÇóœâ 
      c.ŒÆËã¿š¶ûÂüÔöÒæ£¬žüÐÂÎó²î×ŽÌ¬
      d.žùŸÝÎó²î×ŽÌ¬žüÐÂMSCKF×ŽÌ¬£¬x_true := x_nominal + detx
      e.žüÐÂMSCKF²âÁ¿Ð­·œ²îŸØÕó
²œÖè9£ºÀúÊ·×ŽÌ¬žüÐÂ¡£ŽÓMSCKF×ŽÌ¬ÖÐžüÐÂIMUµÄÀúÊ·×ŽÌ¬£¬Íš¹ýÏà»úµÄ×ŽÌ¬žüÐÂ¶ÔÓŠÊ±¿ÌimuµÄÎ»×Ë×ŽÌ¬
       ËµÃ÷£ºÖØÍ¶Ó°Îó²îÖ»ºÍÏà»ú×ŽÌ¬ÓÐ¹Ø£¬msckf²âÁ¿žüÐÂÖ»ÄÜžüÐÂÏà»úÓÐ¹ØµÄ×ŽÌ¬£¬ÒòŽËÔÚ²œÖè8²âÁ¿žüÐÂºóÐèÒªÍš¹ýÏà»ú×ŽÌ¬žüÐÂIMU×ŽÌ¬
²œÖè10£ºÌÞ³ýMSCKFÖÐÐèÒª±»ÉŸ³ýµÄ×ŽÌ¬ºÍ¶ÔÓŠµÄÐ­·œ²îŸØÕó¿é
       Èç¹ûÏà»ú²»ÄÜ¹Û²âµœfeatureTracksÖÐµÄÈÎÒ»ÌØÕ÷£š¶ÔÖØÍ¶Ó°Îó²îÎÞ¹±Ï×£©£¬ÔòMSCKF×ŽÌ¬ÖÐÌÞ³ýžÃÏà»ú×ŽÌ¬
